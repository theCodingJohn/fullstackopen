(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t.n(r),a=t(14),o=t.n(a),u=t(3),i=t(4),s=t.n(i),d="/api/persons",l={getAll:function(){return s.a.get(d).then((function(e){return e.data}))},create:function(e){return s.a.post(d,e).then((function(e){return e.data}))},update:function(e,n){return s.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},deleteObj:function(e){return s.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))}},b=t(0),j=function(e){var n=e.value,t=e.action;return Object(b.jsxs)("div",{children:["filter shown with ",Object(b.jsx)("input",{onChange:t,value:n})]})},f=function(e){var n=e.data;return Object(b.jsxs)("form",{children:[Object(b.jsxs)("div",{children:["name: ",Object(b.jsx)("input",{onChange:n.handleNameChange,value:n.newName})]}),Object(b.jsxs)("div",{children:["number:"," ",Object(b.jsx)("input",{onChange:n.handleNumberChange,value:n.newNumber})]}),Object(b.jsx)("div",{children:Object(b.jsx)("button",{onClick:n.addPerson,type:"submit",children:"add"})})]})},h=function(e){var n=e.person,t=e.action;return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{children:["".concat(n.name," ").concat(n.number," "),Object(b.jsx)("button",{onClick:t,children:"Delete"})]},n.name)})},m=function(e){var n=e.message,t={color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};switch(e.type){case"successful":t.color="green";break;default:t.color="red"}return n?Object(b.jsx)("div",{className:"notif",style:t,children:n}):null},O=function(){var e=Object(r.useState)(null),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),o=Object(u.a)(a,2),i=o[0],s=o[1],d=Object(r.useState)(""),O=Object(u.a)(d,2),v=O[0],p=O[1],g=Object(r.useState)(""),x=Object(u.a)(g,2),w=x[0],C=x[1],k=Object(r.useState)(null),N=Object(u.a)(k,2),y=N[0],S=N[1],A=Object(r.useState)(null),L=Object(u.a)(A,2),D=L[0],P=L[1];Object(r.useEffect)((function(){l.getAll().then((function(e){c(e)}))}),[]);var T={handleNameChange:function(e){s(e.target.value)},newName:i,handleNumberChange:function(e){p(e.target.value)},newNumber:v,addPerson:function(e){e.preventDefault();var n={name:i,number:v},r=t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}));if(r){var a=r.id;window.confirm("".concat(i," is already added to phonebook, replace the old number with a new one?"))&&l.update(a,n).then((function(e){var n=t.map((function(n){return n.id!==a?n:e}));c(n),s(""),p("")}))}else l.create(n).then((function(e){S("Added ".concat(e.name)),P("successful"),setTimeout((function(){return S(null)}),3e3),c(t.concat(e)),s(""),p("")})).catch((function(e){var n=e.response.data.error;S(n),P("error"),setTimeout((function(){return S(null)}),3e3)}))}};return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(m,{message:y,type:D}),Object(b.jsx)(j,{action:function(e){var n=e.target.value;C(e.target.value);var r=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));c(r)},value:w}),Object(b.jsx)("h2",{children:"Add a new"}),Object(b.jsx)(f,{data:T}),Object(b.jsx)("h2",{children:"Numbers"}),!!t&&t.map((function(e){return Object(b.jsx)(h,{person:e,action:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name))&&l.deleteObj(e).then((function(){var n=t.filter((function(n){return n.id!==e}));c(n)})).catch((function(e){S("Information of ".concat(n.name," has already been removed from the server")),P("error"),setTimeout((function(){return S(null)}),3e3)}))}(e.id)}},e.id)}))]})};o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(O,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.741e731f.chunk.js.map